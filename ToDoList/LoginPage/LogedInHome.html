<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Welcome - ToDo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="/LoginPage/LogedInStyle.css">
</head>
<body>
<!-- Sidebar -->
    <div class="sidebar">
        <a href="#" id="addTaskSidebar" class="d-flex align-items-center  text-decoration-none">
            <div class="rounded-circle d-flex justify-content-center align-items-center bg-success text-light fw-semibold fs-3" style="width: 30px; height: 30px;">+</div>
            <span class="ms-2 fs-6 text-dark">Add Task</span>
        </a>
        <a class="link-dark" href="#" id="searchLink"><i class="bi bi-search fs-5 m-1 p"></i> Search</a>
        <a class="link-dark" href="#" id="todayLink"><i class="bi bi-calendar2-date fs-5 m-1"></i> Today</a>
        <h5 class="text-center m-2 text-primary">Work</h5>
        <a class="link-dark" href="/Work/TaskPage.html"><i class="bi bi-list-task fs-5 m-1"></i> Task</a>
        <a class="link-dark" href="/Work/EventsPage.html"><i class="bi bi-calendar2-event fs-5 m-1"></i> Events</a>

        <h5 class="text-center m-2 text-primary">My Projects</h5>
        <a class="link-dark" href="/MyProject/GoalPage.html"><i class="bi bi-bullseye fs-5 m-1"></i> Goal</a>
        <ul class="ms-4 p-2 text-secondary">
            <li>Personal</li>
            <li>Academic</li>
            <li>Financial</li>
            <li>Weekly/Monthly Goal</li>
        </ul>
    </div>

<!-- Main -->
    <div class="main-content">

    <!-- Task Form -->
        <div id="taskPanel" style="display: none;">
            <div class="p-4 task-form">
                <input type="text" id="taskName" class="form-control mb-3" placeholder="Task name" />
                <!-- Due Date -->
                <div class="d-flex flex-wrap justify-content-center gap-3 mb-3">
                    <div>
                        <button type="button" class="btn tag-btn bg-white" id="dueDateBtn">
                            <i class="bi bi-calendar-event m-3 text-success"></i>
                            <span id="dueDateLabel">Due date</span>
                        </button>
                        <input type="date" class="form-control mt-1" id="dueDateInput" style="display: none;" />
                    </div>
                    <!-- Priority -->
                    <div>
                        <button type="button" class="btn tag-btn bg-white" id="priorityBtn">
                            <i class="bi bi-flag m-3 text-danger"></i>
                            <span id="priorityLabel">Priority</span>
                        </button>
                        <select class="form-select form-select-sm mt-1" id="prioritySelect" style="display: none;">
                            <option disabled selected>Select priority</option>
                            <option>Low</option>
                            <option>Medium</option>
                            <option>High</option>
                        </select>
                    </div>
                </div>
                <div class="d-flex justify-content-center align-items-center">
                    <button class="btn btn-danger text-white fw-semibold m-3" onclick="addTask()">Add task</button>
                </div>
            </div>
        </div><br>
        <div class="mt-3 mb-3" id="searchSection" style="display: none;">
            <input type="text" class="form-control" id="searchInput" placeholder="Search tasks..." />
        </div>
        <!-- Task List -->
        <div id="taskPage">
            <!-- <h4 class="mb-3">Task List</h4> -->
            <ul class="list-group" id="taskList"></ul>
            </div>
        </div>
        <div class="page-wrapper">
            <div class="card mb-3" style="width: 300px; height: 300px;">
                <img src="/Images/Front-boy-with-lap.jpg" class="card-img-top" alt="manwithlap" height="200px" width="100%">
                <div class="card-body">
                <h5 class="card-title">Welcome!!!</h5>
                <p class="card-text">You can add tasks and search and could see daily tasks.</p>
                </div>
            </div>

            <div class="card mb-3" style="width: 300px; height: 300px;">
                <img src="/Images/Card-img.jpg" class="card-img-top" alt="womanwithlap" height="200px" width="100%">
                <div class="card-body">
                <h5 class="card-title">ToDo's List</h5>
                <p class="card-text">You can add Work tasks as well as Personal Tasks.</p>
                </div>
            </div>
        </div>
        
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
    <script>
        const taskList = document.getElementById("taskList");const taskPanel = document.getElementById("taskPanel");
        const searchSection = document.getElementById("searchSection");
        let tasks = [];
        function hideAllSections() 
        {
            taskPanel.style.display = "none";
            searchSection.style.display = "none";
        }
        // Show Task Panel
        document.getElementById("addTaskSidebar").onclick = (e) => 
        {
            e.preventDefault();
            hideAllSections();
            taskPanel.style.display = "block";
            renderTasks(tasks);
        };
        // Priority dropdown toggle
        document.getElementById("priorityBtn").onclick = () => 
        {
            const select = document.getElementById("prioritySelect");
            select.style.display = select.style.display === "none" ? "block" : "none";
        };

        // Due date input toggle
        document.getElementById("dueDateBtn").onclick = () => 
        {
            const input = document.getElementById("dueDateInput");
            input.style.display = input.style.display === "none" ? "block" : "none";
        };

        // Add Task Function
        function addTask() 
        {
            const taskName = document.getElementById("taskName").value.trim();
            const dueDate = document.getElementById("dueDateInput").value;
            const priority = document.getElementById("prioritySelect").value;

            if (!taskName) return alert("Enter a task name");

            const task = { name: taskName, dueDate, priority };
            tasks.push(task);
            renderTasks(tasks);

            // Reset form
            document.getElementById("taskName").value = "";
            document.getElementById("dueDateInput").value = "";
            document.getElementById("prioritySelect").value = "Select priority";
            document.getElementById("dueDateInput").style.display = "none";
            document.getElementById("prioritySelect").style.display = "none";
        }

        // Render Tasks
        function renderTasks(taskArray) 
        {
            taskList.innerHTML = "";

            if (taskArray.length === 0) 
            {
                taskList.innerHTML = `
                <li class='list-group-item d-flex justify-content-center'>
                    <div class="text-muted text-center col-md-6">No tasks found.</div>
                </li>
                `;
                return;
            }

            taskArray.forEach(task => 
            {
                const li = document.createElement("li");
                li.className = "list-group-item";
                li.innerHTML = `
                <strong>${task.name}</strong>
                <div class="small text-muted">
                    ${task.priority ? "• Priority: " + task.priority : ""}
                    ${task.dueDate ? "• Due: " + task.dueDate : ""}
                </div>
            `;
            taskList.appendChild(li);
            });
        }

        // Show Search
        document.getElementById("searchLink").onclick = () => 
        {
            hideAllSections();
            searchSection.style.display = "block";
            renderTasks(tasks); // Show all by default
        };

        // Live Search
        document.getElementById("searchInput").addEventListener("input", e => 
        {
            const query = e.target.value.toLowerCase();
            const filtered = tasks.filter(t => t.name.toLowerCase().includes(query));
            renderTasks(filtered);
        });
        // Show Today's Tasks
        document.getElementById("todayLink").onclick = () => 
        {
            hideAllSections();
            const today = new Date().toISOString().split("T")[0];
            const todayTasks = tasks.filter(t => t.dueDate === today);
            renderTasks(todayTasks);
        };
    </script>
</html>